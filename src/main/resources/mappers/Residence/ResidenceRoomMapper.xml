<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.springbootfinal.app.mapper.residence.ResidenceRoomMapper">
    <!--&lt;!&ndash; 특정 숙소의 방 목록 조회 &ndash;&gt;
    <select id="getRoomsByResidenceId" resultType="com.springbootfinal.app.domain.residence.ResidenceRoom">
        SELECT
            room_no AS roomNo,
            resid_no AS residNo,
            room_name AS roomName,
            price_per_night AS pricePerNight
        FROM residence_rooms
        WHERE resid_no = #{residNo}
    </select>

    &lt;!&ndash; 방 등록 &ndash;&gt;
    <insert id="insertRoom" parameterType="com.springbootfinal.app.domain.residence.ResidenceRoom">
        INSERT INTO residence_rooms (
            resid_no, room_name, price_per_night
        ) VALUES (
                     #{residNo}, #{roomName}, #{pricePerNight}
                 )
    </insert>

    &lt;!&ndash; 방 수정 &ndash;&gt;
    <update id="updateRoom" parameterType="com.springbootfinal.app.domain.residence.ResidenceRoom">
        UPDATE residence_rooms
        SET
            room_name = #{roomName},
            price_per_night = #{pricePerNight}
        WHERE room_no = #{roomNo}
    </update>

    &lt;!&ndash; 방 삭제 &ndash;&gt;
    <delete id="deleteRoom" parameterType="Long">
        DELETE FROM residence_rooms WHERE room_no = #{roomNo}
    </delete>-->

    <!-- 방 목록 조회 -->
    <select id="getRoomsByResidenceId" resultType="com.springbootfinal.app.domain.residence.ResidenceRoom">
        SELECT * FROM residence_rooms WHERE resid_no = #{residNo}
    </select>

    <select id="getRoomImageByRoomNo" parameterType="long" resultType="java.lang.String">
        SELECT room_url01
        FROM residence_rooms
        WHERE room_no = #{roomNo}
    </select>


    <!-- 방 등록 -->
    <insert id="insertRoom" parameterType="com.springbootfinal.app.domain.residence.ResidenceRoom" useGeneratedKeys="true" keyProperty="roomNo">
        INSERT INTO residence_rooms (resid_no, room_name, price_per_night, room_url01)
        VALUES (#{residNo}, #{roomName}, #{pricePerNight}, #{roomUrl01})
    </insert>


    <!-- 방 수정 -->
    <update id="updateRoom" parameterType="com.springbootfinal.app.domain.residence.ResidenceRoom">
        UPDATE residence_rooms
        SET room_name = #{roomName},
        price_per_night = #{pricePerNight},
        room_url01 = #{roomUrl01}
        WHERE resid_no = #{residNo}
        AND room_no = #{roomNo}
    </update>

    <!-- 방 삭제 -->
    <delete id="deleteRoom" parameterType="long">
        DELETE FROM residence_rooms WHERE room_no = #{roomNo}
    </delete>

</mapper>