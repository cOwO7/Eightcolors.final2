<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layouts/main_layout}">
<head>
    <link href="bootstrap/bootstrap.min.css" rel="stylesheet">
    <meta charset="UTF-8">
    <title>숙소 등록</title>
<body>
<th:block layout:fragment="content">
    <div class="container">
        <div>
            <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
            <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=36a75517ce82693ff837cc79c740e197&libraries=services,clusterer"></script>
        </div>
        <h1>숙소 등록</h1>
        <form th:action="@{/new}" th:object="${residence}" method="post">
            <label for="residName">숙소 이름:</label>
            <input type="text" id="residName" th:field="*{residName}" required><br><br>

            <label for="residAddress">숙소 주소:</label>
            <input type="text" id="residAddress" th:field="*{residAddress}" required><br><br>

            <label for="residType">숙소 유형:</label>
            <select id="residType" th:field="*{residType}">
                <option value="resort">리조트</option>
                <option value="hotel">호텔</option>
                <option value="pension">펜션</option>
            </select><br><br>

            <label for="totalPrice">원가:</label>
            <input type="number" id="totalPrice" th:field="*{totalPrice}" step="0.01" required><br><br>
            <h3>사진 추가</h3>

            <button type="submit" id="registerButton">등록</button>
            <a href="/list">뒤로 가기</a>
            <!--</form>


            <form th:action="@{/residence/processAllWeather}" method="post">-->
            <div class="col-md-12 text-center">
                <div id="map" style="width: 300px; height: 350px; text-align: center;"></div>
                <table width="85%" style="margin: auto; text-align: center;">
                    <tr>
                        <!-- <td>날짜(baseDate)</td> -->
                        <td><input type="text" id="baseDate" name="baseDate" th:value="${baseDate}"/></td>
                        <!-- <td>시간(baseTime)</td> -->
                        <td><input type="text" id="baseTime" name="baseTime" th:value="${baseTime}"/></td>
                    </tr>
                    <tr>
                        <!-- <td>예보지점 x값</td> -->
                        <td><input type="text" id="nx"  th:field="*{nx}" /></td>
                        <!-- <td>예보지점 y값</td> -->
                        <td><input type="text" id="ny"  th:field="*{ny}" /></td>
                    </tr>
                    <tr>
                        <!-- <td>위도(latitude)</td> -->
                        <td><input type="text" id="latitudeNum" name="latitudeNum" th:value="${latitudeNum}"/></td>
                        <!-- <td>경도(longitude)</td> -->
                        <td><input type="text" id="longitudeNum" name="longitudeNum" th:value="${longitudeNum}"/></td>
                    </tr>
                </table>
                <br/>
                <!-- 한 개의 row로 좌측과 우측을 나누어줍니다 -->
                <div class="row">
                    <!-- 좌측 절반: 도시, 구/시 선택 -->
                    <div class="col-md-6" id="addressChoice">
                        <!-- 도시 선택 -->
                        <div class="mb-3">
                            <label for="city-selector" class="form-label">도시 선택</label>
                            <select id="city-selector" class="btn btn-outline-primary form-select w-100">
                                <option value="">도시를 선택하세요</option>
                                <!-- 도시 옵션은 JavaScript로 동적으로 변경 -->
                            </select>
                        </div>

                        <!-- 구/시 선택 -->
                        <div class="mb-3">
                            <label for="district-selector" class="form-label">구/시 선택</label>
                            <div class="dropdown">
                                <button class="btn btn-outline-primary dropdown-toggle w-100" type="button" id="district-selector" data-bs-toggle="dropdown" aria-expanded="false">
                                    구/시를 선택하세요
                                </button>
                                <ul class="dropdown-menu w-100" aria-labelledby="district-selector" style="max-height: 200px; overflow-y: auto;">
                                    <!-- 구/시 옵션은 JavaScript로 동적으로 변경 -->
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- 우측 절반: 주소 입력란 및 현재 위치 -->
                    <div class="col-md-6">
                        <!-- 주소 입력란 -->
                        <div class="mb-3">
                            <label for="town-selector" class="form-label">주소 검색</label>
                            <div class="d-flex">
                                <!-- input 필드 -->
                                <input type="hidden" id="address" value="" placeholder="검색 버튼을 눌러주세요." class="form-control me-2" style="flex: 1;">
                                <!-- 도시와 구/시만 표시하는 필드 -->
                                <input type="hidden" id="address-hidden" value="" placeholder="좌표 조회는 여기서" class="form-control me-2" style="flex: 1;">
                                <!-- 버튼 -->
                                <button type="button" id="addressBtn" class="btn btn-outline-primary">
                                    검색
                                </button>
                            </div>
                        </div>
                        <!-- 현재 위치 표시란 -->
                        <div class="mb-3">
                            <label for="town-selector" class="form-label">현재 위치</label>
                            <div class="d-flex">
                                <!-- input 필드 -->
                                <input type="hidden" id="localaddrese" value="현재 위치 정보(주간)" class="form-control me-2" readonly style="flex: 1;">
                                <!-- 버튼 -->
                                <button id="getWeatherButton" type="button" class="btn btn-outline-primary">
                                    현재 위치 입력
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!--<label for="regId">육상 지역 코드:</label>-->
                <input type="text" id="regId"  th:field="*{regId}" placeholder="예: 11B00000" required>
                <!--<label for="regIdTemp">기온 지역 코드:</label>-->
                <input type="text" id="regIdTemp"  th:field="*{regIdTemp}" placeholder="예: 11B10101" required>
                <!--<label for="tmFc">발표 시각:</label>-->
                <input type="text" id="tmFc" name="tmFc" placeholder="예: 202312230600" required>
                <!--<button type="submit" id="weatherButton" class="btn btn-outline-success">날씨 예보 조회</button>-->
                <button type="submit" id="weatherButton">날씨 예보 조회</button>
            </div>
        </form>

        <table>
            <tbody id="combinedWeatherTableBody"></tbody>
            <div id="weatherContainer" class="weather-container">
                <div id="row1" class="row1"></div>
            </div>
            <div class="weather-scroll-container">
                <button class="scroll-btn left" onclick="scrollToLeft()">&#10094;</button>
                <div id="row2" class="weather-row"></div>
                <button class="scroll-btn right" onclick="scrollToRight()">&#10095;</button>
            </div>
        </table>
        <form th:action="@{/residence/{residNo}/add-photo(residNo=${residence.residNo})}" method="post">
            <!--<label for="photoUrl01">사진 1:</label>
            &lt;!&ndash;<input type="text" id="photoUrl01" th:field="*{photoUrl01}"><br><br>&ndash;&gt;-->
            <button type="submit" id="photoButton">사진 추가</button>
        </form>

    </div>
    <link href="/css/weather/allW.css" rel="stylesheet"/>
    <script th:src="@{js/jquery-3.7.1.min.js}"></script>
    <!--<script th:src="@{js/weather/allWN.js}"></script>-->
    <script th:src="@{js/map/geolocation.js}"></script>
    <script th:src="@{js/weather/allMapChoice.js}"></script>
    <script th:src="@{js/map/kakaomap2.js}"></script>
</th:block>
</body>
</html>